<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Anggota</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6f9;
}
header{
  background:#1e90ff;
  color:white;
  padding:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header button{
  background:#ff5252;
  border:none;
  color:white;
  padding:6px 10px;
  border-radius:5px;
}
.container{
  padding:20px;
}
form{
  background:white;
  padding:15px;
  border-radius:8px;
  margin-bottom:20px;
}
form input{
  width:100%;
  padding:8px;
  margin:5px 0;
}
form button{
  padding:8px 12px;
  margin-top:10px;
}
table{
  width:100%;
  border-collapse:collapse;
  background:white;
}
th, td{
  padding:10px;
  border:1px solid #ddd;
}
th{
  background:#eee;
}
.action button{
  margin:2px;
}
.empty{
  text-align:center;
  color:#777;
}
</style>
</head>

<body>

<header>
  <h3>Data Anggota</h3>
  <div>
    <button onclick="location.href='dashboard.html'">‚¨Ö Dashboard</button>
    <button onclick="logout()">Logout</button>
  </div>
</header>

<div class="container">

<!-- FORM INPUT -->
<form onsubmit="simpanAnggota(event)">
  <h4>Input / Edit Anggota</h4>
  <input type="hidden" id="editIndex">

  <input type="text" id="nama" placeholder="Nama Anggota" required>
  <input type="text" id="alamat" placeholder="Alamat" required>
  <input type="text" id="telp" placeholder="No. Telp" required>

  <button type="submit">üíæ Simpan</button>
  <button type="button" onclick="resetForm()">Batal</button>
</form>

<!-- LIST -->
<table>
  <thead>
    <tr>
      <th>No</th>
      <th>Nama</th>
      <th>Alamat</th>
      <th>Telp</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody id="listAnggota"></tbody>
</table>

</div>

<script>
/* =====================
   STORAGE
===================== */
function getDB(){
  let db = localStorage.getItem("koperasi_db");
  if(!db){
    db = {
      user:{username:"ali",password:"1234"},
      anggota:[],
      simpanan:[],
      pinjaman:[],
      transaksi:[],
      kas:[]
    };
    localStorage.setItem("koperasi_db",JSON.stringify(db));
  }
  return JSON.parse(db);
}
function saveDB(db){
  localStorage.setItem("koperasi_db",JSON.stringify(db));
}

/* =====================
   AUTH (SIMPLE)
===================== */
function logout(){
  localStorage.removeItem("login");
  location.href="index.html";
}

/* =====================
   ANGGOTA
===================== */
let editIndex = null;

function loadAnggota(){
  const db = getDB();
  const tbody = document.getElementById("listAnggota");

  if(db.anggota.length===0){
    tbody.innerHTML =
      `<tr><td colspan="5" class="empty">Belum ada anggota</td></tr>`;
    return;
  }

  tbody.innerHTML = db.anggota.map((a,i)=>`
    <tr>
      <td>${i+1}</td>
      <td>${a.nama}</td>
      <td>${a.alamat}</td>
      <td>${a.telp}</td>
      <td class="action">
        <button onclick="editAnggota(${i})">‚úèÔ∏è</button>
        <button onclick="hapusAnggota(${i})">üóëÔ∏è</button>
      </td>
    </tr>
  `).join("");
}

function simpanAnggota(e){
  e.preventDefault();
  const db = getDB();

  const data = {
    nama: nama.value,
    alamat: alamat.value,
    telp: telp.value
  };

  if(editIndex===null){
    db.anggota.push(data);
  }else{
    db.anggota[editIndex] = data;
  }

  saveDB(db);
  resetForm();
  loadAnggota();
}

function editAnggota(i){
  const a = getDB().anggota[i];
  nama.value = a.nama;
  alamat.value = a.alamat;
  telp.value = a.telp;
  editIndex = i;
}

function hapusAnggota(i){
  if(!confirm("Hapus anggota ini?")) return;
  const db = getDB();
  db.anggota.splice(i,1);
  saveDB(db);
  loadAnggota();
}

function resetForm(){
  nama.value="";
  alamat.value="";
  telp.value="";
  editIndex=null;
}

loadAnggota();
</script>

</body>
</html>
