<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laporan Koperasi</title>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f4f6f9;
}
header{
  background:#1e90ff;
  color:white;
  padding:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.container{
  padding:20px;
}
button{
  padding:10px 15px;
  border:none;
  border-radius:6px;
  margin:6px 0;
  cursor:pointer;
  width:100%;
  font-weight:bold;
}
.btn-kas{ background:#2ecc71; color:white }
.btn-pinjaman{ background:#e67e22; color:white }
.btn-full{ background:#34495e; color:white }

#pdfPreview{
  display:none;
  margin-top:20px;
}
iframe{
  width:100%;
  height:500px;
  border:1px solid #ccc;
}
select{
  width:100%;
  padding:8px;
  margin-bottom:10px;
  border-radius:6px;
}
label{
  font-size:13px;
  font-weight:bold;
}
</style>
</head>

<body>

<header>
  <h3>Laporan Koperasi</h3>
  <button onclick="location.href='dashboard.html'">â¬… Dashboard</button>
</header>

<div class="container">

  <label>Anggota</label>
  <select id="filterAnggota">
    <option value="">Semua Anggota</option>
  </select>

  <label>Status Pinjaman</label>
  <select id="filterStatus">
    <option value="">Semua</option>
    <option value="AKTIF">Belum Lunas</option>
    <option value="LUNAS">Lunas</option>
  </select>

  <!-- FILTER -->
  <button class="btn-pinjaman" onclick="exportPinjamanFilterPDF()">
    ðŸ“„ Export Pinjaman (Filter)
  </button>

  <!-- LAPORAN -->
  <button class="btn-kas" onclick="exportKasPDF()">
    ðŸ“„ Laporan Kas
  </button>

  <button class="btn-pinjaman" onclick="exportPinjamanPDF()">
    ðŸ“„ Laporan Pinjaman
  </button>

  <button class="btn-full" onclick="exportPinjamanPerAnggotaPDF()">
    ðŸ“„ Pinjaman per Anggota
  </button>

  <!-- PREVIEW -->
  <div id="pdfPreview">
    <h4>Preview PDF</h4>
    <iframe id="pdfFrame"></iframe>

    <button onclick="downloadPDF()" style="background:#1e90ff;color:white">
      â¬‡ Download PDF
    </button>

    <button onclick="shareWA()" style="background:#25d366;color:white">
      ðŸ“² Share WhatsApp
    </button>
  </div>

</div>

<script src="js/storage.js"></script>
<script src="js/auth.js"></script>
<script src="js/export_laporan.js"></script>

<script>
  cekLogin();
  loadFilterAnggota();
</script>

</body>
</html>